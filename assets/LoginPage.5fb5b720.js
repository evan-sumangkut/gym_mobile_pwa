import{_ as k,d as y,S as p,r as c,P as a,H as g,o as d,c as P,w as o,e as i,I as $,J as m,b as t,f as r,K as _,L as w,M as v,N as b,O as C,R as L,Q}from"./index.79d932fe.js";import{Q as V}from"./QPage.8e66f89c.js";import{S}from"./Scroll.c17473bf.js";import{p as x}from"./api.49d6f0f6.js";import{_ as B}from"./logo_gb.831107ae.js";const I=y({name:"LoginPage",data(){return{width:p.width,height:p.height,password:c(""),isPwd:c(!0),form:{username:null,password:null},is_loading:!1}},methods:{checkToken(){a.has("token")&&(g.has("other_login")?g.getItem("other_login")!=!0&&this.$router.push({name:"profile"}):this.$router.push({name:"profile"}))},async actionLogin(){this.is_loading=!0;const e=this.form;await x(e).then(s=>{this.is_loading=!0;let n=[];a.has("data_login")&&(n=a.getItem("data_login"));let u=0;if(n.forEach((f,l)=>{e.username.toLowerCase()===f.username.toLowerCase()&&(u=1)}),u===1){this.$router.push({name:"profile"});return}const h={username:s.user.username,photo_profile:s.user.photo_profile,token:s.token,member_id:s.user.id};n.push(h),a.set("data_login",n),a.set("token",s.token),a.set("member_id",s.user.id),this.$router.push({name:"profile"})}).catch(s=>{this.is_loading=!1})}},mounted(){this.checkToken()}}),q={class:"scroll overflow-hidden",style:{width:"100%"}},z={class:"q-pa-md q-gutter-md"},N=i("i",{class:"fa fa-user",style:{"font-size":"30px"}},null,-1),M={key:0,class:"text-center"},T={key:1},U=i("a",{href:"/#/auth/register"},"Register",-1);function D(e,s,n,u,h,f){return d(),P(V,{class:"flex flex-center"},{default:o(()=>[i("div",q,[$((d(),m("div",null,[i("div",z,[t(Q,{class:"my-card q-pt-xl q-pb-xl"},{default:o(()=>[t(r,{align:"center",class:"text-normal text-h5"},{default:o(()=>[i("img",{alt:"logo MMA",src:B,style:_(`width:${this.width/2.2}px;height:${this.width/2.2}px`)},null,4)]),_:1}),t(r,null,{default:o(()=>[t(w,{modelValue:e.form.username,"onUpdate:modelValue":s[0]||(s[0]=l=>e.form.username=l),label:"Username",dense:e.dense},{append:o(()=>[N]),_:1},8,["modelValue","dense"])]),_:1}),t(r,null,{default:o(()=>[t(w,{modelValue:e.form.password,"onUpdate:modelValue":s[2]||(s[2]=l=>e.form.password=l),label:"Password",type:e.isPwd?"password":"text",dense:e.dense},{append:o(()=>[t(v,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[1]||(s[1]=l=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","dense"])]),_:1}),t(r,null,{default:o(()=>[this.is_loading?(d(),m("div",M,[t(b,{color:"red",size:"3em"})])):(d(),m("div",T,[t(C,{onClick:e.actionLogin,style:{"background-color":"#a61614",color:"white","font-weight":"bold"},label:"Login",class:"full-width","icon-right":"login"},null,8,["onClick"])]))]),_:1}),t(r,{align:"center"},{default:o(()=>[i("p",{style:_(`font-size:${this.width/20}px;`)},[L("Don't have account? "),U],4)]),_:1})]),_:1})])])),[[S,e.scrollHandler]])])]),_:1})}var K=k(I,[["render",D]]);export{K as default};
